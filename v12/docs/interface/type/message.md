!!! warning

    WIP

消息是 OneBot 标准中的一个重要内容，其规定了消息的收发格式。

数组格式将消息表示为一系列消息段对象的数组，表达能力较强，覆盖几乎所有复杂文本类型的消息。

首先，OneBot V12 标准规定，所有 `message` 字段必须为 `array` 类型。

## 消息段

在原 OneBot V11 标准中，使用 CQ 码的形式作为富文本传输，而消息段就是将存在 CQ 码的地方等量替换为数组格式。在字符串格式中，使用 CQ 码表示多媒体内容，例如 `[CQ:image,file=123.jpg]`，这里 CQ 码功能名为 `image`，参数为 file=123.jpg，也即一个键值对。

V12 标准下强制要求为 array 格式消息段，消息段是 CQ 码在数组格式中的表示形式，基本格式如下：

```json
{
    "type": "image",
    "data": {
        "file": "123.jpg"
    }
}
```

其中 `type` 为必需字段，对应原 CQ 码中的功能名，`data` 段对应原参数内容。

在 V12 中，新引入的媒体文件概念的加持下，一条普通包含图片的文本**应该**表现为如下形式：

```json
[
    {"type": "text", "data": {"text": "blah"}},
    {"type": "image", "data": {"file_id": "blahblah"}}
]
```
